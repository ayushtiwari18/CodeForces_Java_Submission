import java.util.*; public class Main {    public static void main(String[] args) {        Scanner sc = new Scanner(System.in);                long t = sc.nextLong();        while (t-- > 0) {            int n = sc.nextInt();            int k = sc.nextInt();            String s = sc.next();             int[] v = new int[n];            for (int p = 0; p < n; p++) {                v[p] = (s.charAt(p) == 'W' ? 1 : 0) + (p > 0 ? v[p - 1] : 0);            }             int res = v[k - 1];            for (int p = k; p < n; p++) {                int cur = v[p] - v[p - k];                res = Math.min(res, cur);            }             System.out.println(res);        }        sc.close();    }}